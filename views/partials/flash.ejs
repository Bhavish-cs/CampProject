<!-- Success Flash Message -->
<% if(success && success.length) { %>
    <div class="flash-container flash-success" role="alert">
        <div class="flash-content">
            <div class="flash-icon">
                <div class="lottie-success" id="success-lottie"></div>
            </div>
            <div class="flash-message">
                <h6 class="flash-title">Success!</h6>
                <p class="flash-text">
                    <%= success %>
                </p>
            </div>
            <button type="button" class="flash-close" onclick="closeFlashMessage(this)">
                <i class="bi bi-x-lg"></i>
            </button>
        </div>
    </div>
    <% } %>

        <!-- Error Flash Message -->
        <% if(error && error.length) { %>
            <div class="flash-container flash-error" role="alert">
                <div class="flash-content">
                    <div class="flash-icon">
                        <div class="lottie-error" id="error-lottie"></div>
                    </div>
                    <div class="flash-message">
                        <h6 class="flash-title">Error!</h6>
                        <p class="flash-text">
                            <%= error %>
                        </p>
                    </div>
                    <button type="button" class="flash-close" onclick="closeFlashMessage(this)">
                        <i class="bi bi-x-lg"></i>
                    </button>
                </div>
            </div>
            <% } %>

                <!-- Warning Flash Message -->
                <% if(warning && warning.length) { %>
                    <div class="flash-container flash-warning" role="alert">
                        <div class="flash-content">
                            <div class="flash-icon">
                                <div class="lottie-warning" id="warning-lottie"></div>
                            </div>
                            <div class="flash-message">
                                <h6 class="flash-title">Warning!</h6>
                                <p class="flash-text">
                                    <%= warning %>
                                </p>
                            </div>
                            <button type="button" class="flash-close" onclick="closeFlashMessage(this)">
                                <i class="bi bi-x-lg"></i>
                            </button>
                        </div>
                    </div>
                    <% } %>

                        <!-- Info Flash Message -->
                        <% if(info && info.length) { %>
                            <div class="flash-container flash-info" role="alert">
                                <div class="flash-content">
                                    <div class="flash-icon">
                                        <div class="lottie-info" id="info-lottie"></div>
                                    </div>
                                    <div class="flash-message">
                                        <h6 class="flash-title">Information</h6>
                                        <p class="flash-text">
                                            <%= info %>
                                        </p>
                                    </div>
                                    <button type="button" class="flash-close" onclick="closeFlashMessage(this)">
                                        <i class="bi bi-x-lg"></i>
                                    </button>
                                </div>
                            </div>
                            <% } %>

                                <!-- No Data Flash Message (Special case using the provided Lottie animation) -->
                                <% if(locals.noData) { %>
                                    <div class="flash-container flash-no-data" role="alert">
                                        <div class="flash-content">
                                            <div class="flash-icon flash-icon-large">
                                                <div class="lottie-no-data" id="no-data-lottie"></div>
                                            </div>
                                            <div class="flash-message">
                                                <h6 class="flash-title">No Data Found</h6>
                                                <p class="flash-text">We couldn't find any results matching your
                                                    request. Please try again or modify your search criteria.</p>
                                            </div>
                                            <button type="button" class="flash-close" onclick="closeFlashMessage(this)">
                                                <i class="bi bi-x-lg"></i>
                                            </button>
                                        </div>
                                    </div>
                                    <% } %>

                                        <!-- Lottie Web Library -->
                                        <script
                                            src="https://cdnjs.cloudflare.com/ajax/libs/bodymovin/5.10.1/lottie.min.js"></script>

                                        <script>
                                            // Professional Flash Message System with Lottie Animations
                                            document.addEventListener('DOMContentLoaded', function () {
                                                // Initialize all flash message animations
                                                initializeFlashMessages();

                                                // Auto-hide flash messages after 6 seconds
                                                const flashContainers = document.querySelectorAll('.flash-container');
                                                flashContainers.forEach(container => {
                                                    setTimeout(() => {
                                                        hideFlashMessage(container);
                                                    }, 6000);
                                                });
                                            });

                                            function initializeFlashMessages() {
                                                // Success Lottie Animation (Checkmark)
                                                const successContainer = document.getElementById('success-lottie');
                                                if (successContainer) {
                                                    lottie.loadAnimation({
                                                        container: successContainer,
                                                        renderer: 'svg',
                                                        loop: false,
                                                        autoplay: true,
                                                        path: 'https://assets9.lottiefiles.com/packages/lf20_jcikwtux.json'
                                                    });
                                                }

                                                // Error Lottie Animation (Cross/X)
                                                const errorContainer = document.getElementById('error-lottie');
                                                if (errorContainer) {
                                                    lottie.loadAnimation({
                                                        container: errorContainer,
                                                        renderer: 'svg',
                                                        loop: false,
                                                        autoplay: true,
                                                        path: 'https://assets4.lottiefiles.com/packages/lf20_khzniaya.json'
                                                    });
                                                }

                                                // Warning Lottie Animation (Exclamation)
                                                const warningContainer = document.getElementById('warning-lottie');
                                                if (warningContainer) {
                                                    lottie.loadAnimation({
                                                        container: warningContainer,
                                                        renderer: 'svg',
                                                        loop: true,
                                                        autoplay: true,
                                                        path: 'https://assets8.lottiefiles.com/packages/lf20_round_loader.json'
                                                    });
                                                }

                                                // Info Lottie Animation (Info icon)
                                                const infoContainer = document.getElementById('info-lottie');
                                                if (infoContainer) {
                                                    lottie.loadAnimation({
                                                        container: infoContainer,
                                                        renderer: 'svg',
                                                        loop: false,
                                                        autoplay: true,
                                                        path: 'https://assets1.lottiefiles.com/packages/lf20_06a6pf9i.json'
                                                    });
                                                }

                                                // No Data Lottie Animation (Using the provided JSON)
                                                const noDataContainer = document.getElementById('no-data-lottie');
                                                if (noDataContainer) {
                                                    // Simple Lottie integration using bodymovin
                                                    lottie.loadAnimation({
                                                        container: noDataContainer,
                                                        renderer: 'svg',
                                                        loop: true,
                                                        autoplay: true,
                                                        path: '/no data found json.json'  // Path to your JSON file in public folder
                                                    });
                                                }
                                            }

                                            function closeFlashMessage(button) {
                                                const container = button.closest('.flash-container');
                                                hideFlashMessage(container);
                                            }

                                            function hideFlashMessage(container) {
                                                container.style.animation = 'slideOutUp 0.5s ease-in forwards';
                                                setTimeout(() => {
                                                    container.remove();
                                                }, 500);
                                            }
                                        </script>